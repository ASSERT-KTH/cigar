{
    "patch": "    sb.append(quote);\n    for (int i = 0; i < s.length(); i++) {\n      char c = s.charAt(i);\n      switch (c) {\n        case '\\\\': sb.append(backslashEscape); break;\n        case '\\\"': sb.append(doublequoteEscape); break;\n        case '\\'': sb.append(singlequoteEscape); break;\n        case '>':                       // Break --> into --\\> or ]]> into ]]\\>\n          if (i >= 2 &&\n              ((s.charAt(i - 1) == '-' && s.charAt(i - 2) == '-') ||\n               (s.charAt(i - 1) == ']' && s.charAt(i - 2) == ']'))) {\n            sb.append(\"\\\\>\");\n          } else {\n            sb.append(c);\n          }\n          break;\n        case '<':\n          // Break </script into <\\/script\n          final String END_SCRIPT = \"/script\";\n\n          // Break <!-- into <\\!--\n          final String START_COMMENT = \"!--\";\n\n          if (s.regionMatches(true, i + 1, END_SCRIPT, 0,\n                              END_SCRIPT.length())) {\n            sb.append(\"<\\\\\");\n          } else if (s.regionMatches(false, i + 1, START_COMMENT, 0,\n                                     START_COMMENT.length())) {\n            sb.append(\"<\\\\\");\n          } else {\n            sb.append(c);\n          }\n          break;\n        default:\n          if (c >= '\\0' && c <= '\\b' || c == '\\f' || c >= '\\u000E' && c <= '\\u001F'\n              || c >= '\\u007F' && c <= '\\u009F') {\n            appendHexJavaScriptRepresentation(sb, c);\n          } else {\n            sb.append(c);\n          }\n      }\n    }\n    sb.append(quote);\n    return sb.toString();\n  }",
    "patch_diff": "diff --git a/src/com/google/javascript/jscomp/CodeGenerator.java b/src/com/google/javascript/jscomp/CodeGenerator.java\nindex 6117a89b..6fd2a5f5 100644\n--- a/src/com/google/javascript/jscomp/CodeGenerator.java\n+++ b/src/com/google/javascript/jscomp/CodeGenerator.java\n@@ -1012,7 +1012,51 @@ class CodeGenerator {\n     for (int i = 0; i < s.length(); i++) {\n       char c = s.charAt(i);\n       switch (c) {\n-        case '\\0': sb.append(\"\\\\0\"); break;\n+    sb.append(quote);\n+    for (int i = 0; i < s.length(); i++) {\n+      char c = s.charAt(i);\n+      switch (c) {\n+        case '\\\\': sb.append(backslashEscape); break;\n+        case '\\\"': sb.append(doublequoteEscape); break;\n+        case '\\'': sb.append(singlequoteEscape); break;\n+        case '>':                       // Break --> into --\\> or ]]> into ]]\\>\n+          if (i >= 2 &&\n+              ((s.charAt(i - 1) == '-' && s.charAt(i - 2) == '-') ||\n+               (s.charAt(i - 1) == ']' && s.charAt(i - 2) == ']'))) {\n+            sb.append(\"\\\\>\");\n+          } else {\n+            sb.append(c);\n+          }\n+          break;\n+        case '<':\n+          // Break </script into <\\/script\n+          final String END_SCRIPT = \"/script\";\n+\n+          // Break <!-- into <\\!--\n+          final String START_COMMENT = \"!--\";\n+\n+          if (s.regionMatches(true, i + 1, END_SCRIPT, 0,\n+                              END_SCRIPT.length())) {\n+            sb.append(\"<\\\\\");\n+          } else if (s.regionMatches(false, i + 1, START_COMMENT, 0,\n+                                     START_COMMENT.length())) {\n+            sb.append(\"<\\\\\");\n+          } else {\n+            sb.append(c);\n+          }\n+          break;\n+        default:\n+          if (c >= '\\0' && c <= '\\b' || c == '\\f' || c >= '\\u000E' && c <= '\\u001F'\n+              || c >= '\\u007F' && c <= '\\u009F') {\n+            appendHexJavaScriptRepresentation(sb, c);\n+          } else {\n+            sb.append(c);\n+          }\n+      }\n+    }\n+    sb.append(quote);\n+    return sb.toString();\n+  }\n         case '\\n': sb.append(\"\\\\n\"); break;\n         case '\\r': sb.append(\"\\\\r\"); break;\n         case '\\t': sb.append(\"\\\\t\"); break;",
    "result_reason": "error: case, default, or '}' expected",
    "test_result": "ERROR"
}